---
language: python
python: "2.7"
sudo: required
dist: trusty

# environment variables
env:
  - ANSIBLE_INVENTORY=hosts

# update apt indices, install dependencies
before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y python-dev python-pip gcc git

# install ansible from pip
install:
  - pip install --upgrade pip
  - pip install --upgrade ansible

# run tests
script:
  # run syntax checks
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --syntax-check"

  # run score tasks (break up by section)
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section-01\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section2-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section2-level-2\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section3-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section4-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section7-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section8-level-2\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section9-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section10-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section11-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section12-level-1\" --skip-tags \"notscored\""
#  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section13-level-1\" --skip-tags \"notscored\""

  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section-01\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section2-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section2-level-2\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section3-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section4-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section7-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section8-level-2\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section9-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section10-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section11-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section12-level-1\" "
  - "ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags \"section13-level-1\" "



#  - "travis_wait 30 ansible-playbook tests/test.yml -i tests/hosts --connection=local --tags=scored"

# vim: set sw=2 ts=2:
